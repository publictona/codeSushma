<% include ../partials/head %>
    <% include ../partials/header %>
        <% var module_name="manPowerRequest" ; var columns="app_name module_name" ; %>

            <style>
                body {
                    font-family: Arial;
                }

                /* Style the tab */
                .tab {
                    overflow: hidden;
                    border: 1px solid #ccc;
                    background-color: #f1f1f1;
                }

                /* Style the buttons inside the tab */
                .tab button {
                    background-color: inherit;
                    float: left;
                    border: none;
                    outline: none;
                    cursor: pointer;
                    padding: 14px 16px;
                    transition: 0.3s;
                    font-size: 17px;
                }

                /* Change background color of buttons on hover */
                .tab button:hover {
                    background-color: #ddd;
                }

                /* Create an active/current tablink class */
                .tab button.active {
                    background-color: #ccc;
                }

                /* Style the tab content */
                .tabcontent {
                    display: none;
                    padding: 6px 12px;
                    -webkit-animation: fadeEffect 1s;
                    animation: fadeEffect 1s;
                }

                /* Fade in tabs */
                @-webkit-keyframes fadeEffect {
                    from {
                        opacity: 0;
                    }

                    to {
                        opacity: 1;
                    }
                }

                @keyframes fadeEffect {
                    from {
                        opacity: 0;
                    }

                    to {
                        opacity: 1;
                    }
                }
            </style>

            <div id="printModal" class="modal fade" role="dialog">
                <div class="modal-dialog modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header modal-otp-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span> </button>
                            <h5>Print HR Recruitment Form</h5>
                        </div>
                        <div class="modal-body modal-body-otp" id="printBody">
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- left column -->
                <div class="col-md-7">
                    <!-- general form elements -->
                    <div class="box box-primary">
                        <div class="box-header with-border">
                            <h3 class="box-title form-title">Add Man Power Request</h3>
                            <button class="btn btn-primary form_add_entry  pull-right btn-xs" type="submit">Add Man
                                Power Request </button>
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <div data-app="formApp" data-controller="formController">
                                        <form data-submit="processForm()" id="erp_form" action="/route/manPowerRequest"
                                            autocomplete="off">
                                            <fieldset class="gutter--3px">
                                                <!-- <div class="col-md-12 text-right"><i class="fa fa-print btn btn-primary"
                                                        onclick="printHrForm(this)" style="margin-bottom:5px; "></i>
                                                </div> -->

                                                <div class="tab">
                                                    <button class="tablinks"
                                                        onclick="openCity(event, 'Requirement')">Requirement</button>
                                                    <button class="tablinks"
                                                        onclick="openCity(event, 'Position Profile')">Position
                                                        Profile</button>
                                                    <button class="tablinks"
                                                        onclick="openCity(event, 'Other')">Other</button>

                                                    <button class="tablinks"
                                                        onclick="openCity(event, 'Recruitment')">Recruitment</button>
                                                </div>

                                                <div id="Requirement" class="tabcontent">

                                                    <div>
                                                        <!-- <div class="col-md-12 text-right"><strong
                                                                class="btn btn-primary"
                                                                onclick="printGroupingDetails(this)">View</strong></div> -->

                                                        <h4>Requirement Details</h4>
                                                    </div>

                                                    <div class="form-group row col-md-12">
                                                        <label for="Date Of Request"
                                                            class="col-sm-3 col-form-label fs15--design">Date Of
                                                            Request</label>
                                                        <div class="col-sm-9">
                                                            <input type="text" class="form-control datepicker"
                                                                name="dateRequest" placeholder="DD/MM/YYYY" />
                                                        </div>
                                                    </div>

                                                    <div class="form-group row col-md-12">
                                                        <label for="Requestor Name"
                                                            class="col-sm-3 col-form-label fs15--design">Requestor
                                                            Name</label>
                                                        <div class="col-sm-9">
                                                            <input type="text" class="form-control" name="requestorName"
                                                                id="requestorName">
                                                        </div>
                                                    </div>

                                                    <div class="form-group row col-md-12">
                                                        <label for="Name And Designation"
                                                            class="col-sm-3 col-form-label fs15--design">Requestor
                                                            Designation</label>
                                                        <div class="col-sm-9">
                                                            <input type="text" class="form-control"
                                                                name="requestorDesignation" id="requestorDesignation">
                                                        </div>
                                                    </div>

                                                    <div class="form-group row col-md-12">
                                                        <label for="Position To Be Filled"
                                                            class="col-sm-3 col-form-label fs15--design">Position To Be
                                                            Filled</label>
                                                        <div class="col-sm-9">
                                                            <input type="number" class="form-control"
                                                                name="positionFilled" id="positionFilled">
                                                        </div>
                                                    </div>

                                                    <div class="form-group row col-md-12">
                                                        <label for="Location"
                                                            class="col-sm-3 col-form-label fs15--design">Location</label>
                                                        <div class="col-sm-9">
                                                            <input type="text" class="form-control" name="location"
                                                                id="location">
                                                        </div>
                                                    </div>

                                                    <div class="form-group row col-md-12">
                                                        <label for="inlineRadio211"
                                                            class="col-sm-3 col-form-label fs15--design">Position/Vacancy</label>

                                                        <div class="col-sm-9">
                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio"
                                                                    name="inlineRadioOptionss" id="inlineRadio211"
                                                                    value="Existing">
                                                                <label class="form-check-label"
                                                                    for="inlineRadio211">Existing</label>
                                                            </div>

                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio"
                                                                    name="inlineRadioOptionss" id="inlineRadio211"
                                                                    value="New Position">
                                                                <label class="form-check-label" for="inlineRadio211">New
                                                                    Position</label>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- 000 -->
                                                    <div class="form-group row col-md-12">
                                                        <label for="Budget Salary"
                                                            class="col-sm-3 col-form-label fs15--design">Budget
                                                            Salary/CTC <span class="text-red">*</span></label>

                                                        <div class="col-sm-9">
                                                            <div class="fs12--design">
                                                                <div>
                                                                    <label for="exitMin"
                                                                        class="col-sm-3 col-form-label fs10--design">Existing
                                                                        Rs :</label>
                                                                    <input type="number" id="exitMin" name="exitMin"
                                                                        value="existingSalary">
                                                                </div>

                                                                <br>

                                                                <div>
                                                                    <label for="exitMax"
                                                                        class="col-sm-3 col-form-label fs10--design">New
                                                                        Position Rs: </label>
                                                                    <input type="number" id="exitMax" name="exitMax"
                                                                        value="newPositionSalary">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <!-- ---------- -->
                                                    <div class="form-group row col-md-12">
                                                        <label for="candidateIdentified"
                                                            class="col-sm-7 col-form-label fs15--design">Has an Internal
                                                            Candidate(s) been identified</label>


                                                        <div class="col-sm-9">

                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio"
                                                                    name="inlineRadioOptions" id="candidateIdentified"
                                                                    value="Yes">
                                                                <label class="form-check-label"
                                                                    for="candidateIdentified">Yes</label>
                                                            </div>

                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio"
                                                                    name="inlineRadioOptions" id="candidateIdentified"
                                                                    value="No">
                                                                <label class="form-check-label"
                                                                    for="candidateIdentified">No</label>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="form-group col-md-12 ">
                                                            <label for="Tour" class="fs15--design">Critical Impact of
                                                                This Position on The Business <span
                                                                    class="text-red">*</span></label>
                                                            <textarea rows="8" class="form-control textarea"
                                                                name="impactPosition" id="impactPosition"> </textarea>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div id="Position Profile" class="form-group col-md-12 tabcontent ">

                                                    <div>

                                                        <!-- <div class="col-md-12 text-right"><strong
                                                                class="btn btn-primary"
                                                                onclick="printGroupingDetails(this)">View</strong></div> -->

                                                        <h4>Position Profile Details</h4>
                                                    </div>

                                                    <div class="row">
                                                        <div class="form-group col-md-12">
                                                            <label for="Name And Designation"
                                                                class="fs15--design">Designation/Title</label> <span
                                                                class="text-red">*</span></label>
                                                            <input type="text" class="form-control"
                                                                name="designationTitle" id="designationTitle">
                                                        </div>
                                                    </div>



                                                    <div class="row">
                                                        <div class="form-group col-md-12">
                                                            <label for="Tour" class="fs15--design">Reporting To (The
                                                                Position To Whom The Person Reports to)</label> <span
                                                                class="text-red">*</span></label>
                                                            <input rows="8" class="form-control reportingTo"
                                                                name="reportingTo" id="reportingTo"> </input>
                                                        </div>
                                                    </div>



                                                    <div class="row">
                                                        <div class="form-group col-md-12">
                                                            <label for="Tour" class="fs15--design">Job
                                                                Description(Functions the Person will be the Person
                                                                Reports to)</label> <span
                                                                class="text-red">*</span></label>
                                                            <textarea rows="8" class="form-control textarea"
                                                                name="jobDescription" id="jobDescription"> </textarea>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="form-group col-md-12 ">
                                                            <label for="Tour" class="fs15--design">Qualification And Job
                                                                Specification(Mention the Skill sets/qualities &
                                                                competencies needed for the position to face the
                                                                challenges involved in the Job) <span
                                                                    class="text-red">*</span></label>
                                                            <textarea rows="8" class="form-control textarea"
                                                                name="specification" id="specification"> </textarea>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div id="Other" class="form-group col-md-12 tabcontent ">

                                                    <div>
                                                        <!-- <div class="col-md-12 text-right"><strong
                                                                class="btn btn-primary"
                                                                onclick="printGroupingDetails(this)">View</strong></div> -->
                                                        <h4>Other Details</h4>
                                                    </div>

                                                    <div class="form-group row col-md-12">
                                                        <label for="experiance"
                                                            class="col-sm-3 col-form-label fs15--design">Experiance
                                                            <span class="text-red">*</span></label>

                                                        <div class="col-sm-9">
                                                            <div class="fs12--design">

                                                                <div>
                                                                    <label for="minn"
                                                                        class="col-sm-4 col-form-label fs10--design">Minimum
                                                                        Experience:</label>
                                                                    <input type="number" id="minn" name="minn">
                                                                </div>
                                                                <br>
                                                                <div>

                                                                    <label for="maxx"
                                                                        class="col-sm-4 col-form-label fs10--design">Maximum
                                                                        Experience:</label>

                                                                    <input type="number" id="maxx" name="maxx">
                                                                </div>

                                                                <br>
                                                                <div>
                                                                    <label for="maxxx"
                                                                        class="col-sm-4 col-form-label fs10--design">Total
                                                                        Experience:</label>

                                                                    <input type="number" id="maxxx" name="maxxx">

                                                                </div>
                                                                <br>
                                                                <div>
                                                                    <label for="maxxxx"
                                                                        class="col-sm-4 col-form-label fs10--design">Relevant
                                                                        Experience:</label>

                                                                    <input type="number" id="maxxxx" name="maxxxx">

                                                                </div>
                                                            </div>
                                                        </div>


                                                    </div>


                                                    <!-- ------------language Details--------- -->
                                                    <div>
                                                        <h4>Language Details:</h4>


                                                        <h5>Language 1:</h5>
                                                        <label for="lang1">Language:</label>
                                                        <input type="text" id="lang1" name="lang1" required><br>
                                                        <label>Level of Proficiency:</label><br>
                                                        <label for="reading">Reading:</label>
                                                        <input type="checkbox" id="reading" name="reading" value="Yes">
                                                        <label for="writing">Writing:</label>
                                                        <input type="checkbox" id="writing" name="writing" value="Yes">
                                                        <label for="speaking">Speaking:</label>
                                                        <input type="checkbox" id="speaking" name="speaking"
                                                            value="Yes"><br>


                                                        <h5>Language 2:</h5>
                                                        <label for="lang2">Language:</label>
                                                        <input type="text" id="lang2" name="lang2" required><br>
                                                        <label>Level of Proficiency:</label><br>
                                                        <label for="reading2">Reading:</label>
                                                        <input type="checkbox" id="reading2" name="reading2"
                                                            value="Yes">
                                                        <label for="writing2">Writing:</label>
                                                        <input type="checkbox" id="writing2" name="writing2"
                                                            value="Yes">
                                                        <label for="speaking2">Speaking:</label>
                                                        <input type="checkbox" id="speaking2" name="speaking2"
                                                            value="Yes"><br>


                                                        <h5>Language 3:</h5>
                                                        <label for="lang3">Language:</label>
                                                        <input type="text" id="lang3" name="lang3" required><br>
                                                        <label>Level of Proficiency:</label><br>
                                                        <label for="reading3">Reading:</label>
                                                        <input type="checkbox" id="reading3" name="reading3"
                                                            value="Yes">
                                                        <label for="writing3">Writing:</label>
                                                        <input type="checkbox" id="writing3" name="writing3"
                                                            value="Yes">
                                                        <label for="speaking3">Speaking:</label>
                                                        <input type="checkbox" id="speaking3" name="speaking3"
                                                            value="Yes"><br>


                                                    </div>


                                                    <!-- -------------- -->



                                                    <div class="row">
                                                        <div class="form-group col-md-12">
                                                            <label for="Tour" class="fs15--design"> Candidate
                                                                Age</label> <span class="text-red">*</span></label>
                                                            <input rows="8" class="form-control age" name="age"
                                                                id="age"> </input>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="form-group col-md-12">
                                                            <label for="Tour" class="fs15--design">Requirement For
                                                                Two/Four Wheeler</label> <span
                                                                class="text-red">*</span></label>
                                                            <input rows="8" class="form-control twoWheeler"
                                                                name="twoWheeler" id="twoWheeler"> </input>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="form-group col-md-12">
                                                            <label for="Tour" class="fs15--design">Requirement to
                                                                be Filled(on or before)
                                                                Number</label> <span class="text-red">*</span></label>
                                                            <input rows="8" class="form-control requirementFilledNo"
                                                                name="requirementFilledNo" id="requirementFilledNo">
                                                            </input>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div id="Recruitment" class="form-group col-md-12 tabcontent ">

                                                    <div>
                                                        <!-- <div class="col-md-12 text-right"><strong
                                                                class="btn btn-primary"
                                                                onclick="printGroupingDetails(this)">View</strong></div> -->

                                                        <h4>Recruitment Details(To Be Filled By HR)</h4>
                                                    </div>

                                                    <div class="form-group row col-md-12">
                                                        <label for="Person Selected"
                                                            class="col-sm-4 col-form-label fs15--design">Name Of Person
                                                            Selected <span>:</span></label>
                                                        <div class="col-sm-8">
                                                            <input type="text" class="form-control"
                                                                name="personSelected" id="personSelected">
                                                        </div>
                                                    </div>

                                                    <div class="form-group row col-md-12">
                                                        <label for="Reference Number"
                                                            class="col-sm-4 col-form-label fs15--design">Designation
                                                            <span class="text-red">*</span>
                                                            <span>:</span></label>
                                                        <div class="col-sm-8">
                                                            <input type="text" class="form-control" name="designationHr"
                                                                id="designationHr">
                                                        </div>
                                                    </div>



                                                    <div class="form-group row col-md-12">
                                                        <label for="Reference Number"
                                                            class="col-sm-4 col-form-label fs15--design">CTC <span
                                                                class="text-red">*</span>
                                                            <span>:</span></label>
                                                        <div class="col-sm-8">
                                                            <input type="text" class="form-control" name="ctc" id="ctc">
                                                        </div>
                                                    </div>

                                                    <div class="form-group row col-md-12">
                                                        <label for="Reference Number"
                                                            class="col-sm-4 col-form-label fs15--design">Gross
                                                            <span>:</span></label>
                                                        <div class="col-sm-8">
                                                            <input type="text" class="form-control" name="gross"
                                                                id="gross">
                                                        </div>
                                                    </div>

                                                    <div class="form-group row col-md-12">
                                                        <label for="Reference Number"
                                                            class="col-sm-4 col-form-label fs15--design">Recruited
                                                            Through <span
                                                                class="text-red">*</span><span>:</span></label>
                                                        <div class="col-sm-8">
                                                            <input type="text" class="form-control"
                                                                name="recruitedThrough" id="recruitedThrough">
                                                        </div>
                                                    </div>

                                                    <div class="form-group row col-md-12">
                                                        <label for="Reference Number"
                                                            class="col-sm-4 col-form-label fs15--design">Expected DOJ
                                                            <span class="text-red">*</span>
                                                            <span>:</span></label>
                                                        <div class="col-sm-8">
                                                            <input type="text" class="form-control" name="doj" id="doj">
                                                        </div>
                                                    </div>

                                                    <div class="form-group row col-md-12">
                                                        <label for="Reference Number"
                                                            class="col-sm-4 col-form-label fs15--design">Sign of HR
                                                            Manager <span class="text-red">*</span><span>:</span>
                                                        </label>
                                                        <div class="col-sm-8">
                                                            <input type="text" class="form-control" name="hrSign"
                                                                id="hrSign">
                                                        </div>
                                                    </div>

                                                    <div class="box-footer">
                                                        <button type="submit"
                                                            class="btn btn-primary btn-guest button-submit-form btn-block"
                                                            style="">SUBMIT</button>
                                                    </div>

                                                </div>





                                                <div class="box-footer">
                                                    <!-- <button type="submit"
                                                        class="btn btn-primary btn-guest button-submit-form btn-block"
                                                        style="">Add</button> -->
                                                </div>
                                                <div class="alert alert-success hide-alert-box" id="success-alert">
                                                    <button type="button" class="close" data-dismiss="alert">x</button>
                                                    <strong>Success! </strong> Record added successfully.
                                                </div>
                                                <div class="alert alert-success hide-alert-box" id="custom_Success">
                                                    <button type="button" class="close" data-dismiss="alert">x</button>
                                                    <strong>Success! </strong> Record Update successfully.
                                                </div>
                                                <!-- <span class="custom_Success"></span> -->
                                                <div class="alert alert-danger hide-alert-box" id="danger-alert">
                                                    <button type="button" class="close" data-dismiss="alert">x</button>
                                                    <strong>Error! </strong>
                                                    <span class="custom_error"></span>
                                                </div>
                                                <input type="hidden" class="form-control" name="AccessToken"
                                                    value="<%= AccessToken %>" />
                                                <label class="custom_error name_error"></label>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="overlay">
                                <i class="fa fa-refresh fa-spin"></i>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- datatable right side -->
                <div class="col-md-5">
                    <div class="col-md-12 r-col">
                        <table id="uspList" class="table table-bordered table-striped display nowrap order-column"
                            style="width:100%;">
                            <tbody class="appar">
                            </tbody>
                        </table>
                    </div>
                </div>



            </div>
            <!-- /.row -->
            <!-- /.row -->
            <input type="hidden" name="current_module_name" id="current_module_name" value="<%- module_name %>" />
            <input type="hidden" name="module_columns" id="module_columns" value="<%- columns %>">




            <script src="/AdminLTE/plugins/bootstrap-tagsinput/bootstrap-tagsinput.js" type="text/javascript"></script>
            <script type="text/javascript" src="/js/grid.js"></script>
            <script>


                var DrawTableInquiry;


                $(document).ready(function () {

                    var dataColumns = [{
                        data: "_id",
                        sTitle: "Id",
                        visible: false
                    },

                    {
                        data: "reference_No",
                        sTitle: "Ref No",
                        visible: true,
                        className: "fs15--design",

                    },
                    {
                        data: "requestorName",
                        sTitle: "Req.Name",
                        visible: true,
                        className: "fs15--design",

                    },

                    {
                        data: "requestorDesignation",
                        sTitle: "Req Desig.",
                        visible: true,
                        className: "fs15--design",

                    },

                    {
                        data: "positionFilled",
                        sTitle: "Positions",
                        visible: true,
                        className: "fs15--design",

                    },


                    {
                        data: "HR_Form",
                        sTitle: "A",
                        visible: true,
                        render: function (data, type, row) {
                            //console.log(row);
                            var html =
                                ' <span class="btn btn-primary btn-block grid-edit-row" data-id="' + row
                                    ._id +
                                '"  "><i class="fa fa-pencil"></i></span>';
                            return html;
                        }
                    },

                    {
                        data: "HR_Form",
                        sTitle: "A",
                        visible: true,
                        render: function (data, type, row) {
                            //console.log(row);
                            var html =
                                ' <span class="btn btn-primary btn-block" data-id="' + row
                                    ._id +
                                '" onclick="getHrRecruitmentFormPrint(this) "><i class="fa fa-print"></i></span>';
                            return html;
                        }
                    }

                    ];


                    DrawTableInquiry = DrawCustomDataTable("uspList", 350,
                        "/route/manPowerRequest/grid-Data", dataColumns, [
                        [0, "asc"]
                    ], "frm_grid_search", null, true, true);

                    $("#frm_grid_search").validate({
                        errorPlacement: function (error, element) { },
                        submitHandler: function (form) {
                            DrawTableInquiry.ajax.reload();
                        }
                    });
                    $('.textUpper').on('keyup', function (e) {
                        $(this).val($(this).val().toUpperCase());
                    });

                    $("form#regForm").submit(function (e) {
                        $('#newUserBox').modal('hide');
                        e.preventDefault();
                    });




                });

                // -----------------------------------end----------------------------------

                $(document).ready(function () {

                    var obj = $(this);
                    /* $(document).on("change","#days",function(){
                    $(".select2").select2();
                    });*/
                    $(window).load(function () {
                        $(".select2").select2();
                    });

                    $("#functions, files, urls").tagsinput({
                        tagClass: 'big',
                        trimValue: true
                    });
                    $('.datepicker').datepicker({
                        format: 'dd/mm/yyyy',
                        startDate: 'd',
                        autoclose: true
                    });
                    $(".textarea").wysihtml5();
                    var sector = {
                        AccessToken: "<%= AccessToken %>"
                    };
                    $('.btn-submit').attr('disabled', 'disabled');
                    var SubmitUrlId;
                    var populate_data = {};
                    var action_type;
                    var NewObject;
                    var flag = false;
                    $("#erp_form .form-control").on("blur change keyup", function () {
                        $(this).closest('form').data('changed', true);
                        // if(flag == true)
                        $('.btn-submit').removeAttr('disabled');
                    });
                    $(".form_add_entry").click(function () {
                        document.getElementById("erp_form").reset();
                        $("#files").tagsinput('removeAll');
                        $("#urls").tagsinput('removeAll');
                        $("#functions").tagsinput('removeAll');
                        $(".select2").select2();
                        action_type = "POST";
                        $('.view-days').html("");
                        $(".form-title").html("Add Details");
                        $(".button-submit-form").html("Add");
                        $(".form_add_entry").hide();
                    });
                    $(document).on('click', '.grid-edit-row', function () {
                        var edit_data = '';
                        $(".overlay").show();
                        $(".form-title").html("Edit Module Doc.");
                        $(".button-submit-form").html("Update");
                        document.getElementById("erp_form").reset();
                        $("#files").tagsinput('removeAll');
                        $("#urls").tagsinput('removeAll');
                        $("#functions").tagsinput('removeAll');
                        $(".select2").select2();
                        var id = $(this).attr("data-id");
                        var url = "/route/manPowerRequest/" + id;
                        $.get(url, {}, function (data) {
                            populate_data = data;
                            $.when($('#erp_form').populate(data)).done(function (x) {
                                if (data.files) {
                                    for (var i = 0; i < data.files.length; i++) {
                                        $('#files').tagsinput('add', data.files[i]);
                                    }
                                }
                                if (data.urls) {
                                    for (var i = 0; i < data.urls.length; i++) {
                                        $('#urls').tagsinput('add', data.urls[i]);
                                    }
                                }
                                if (data.functions) {
                                    for (var i = 0; i < data.functions.length; i++) {
                                        $('#functions').tagsinput('add', data.functions[i]);
                                    }
                                }
                                $('#page').trigger("change");
                                $('#sector').trigger("change");
                                SubmitUrlId = "/" + populate_data._id;
                                action_type = "PUT";
                                NewObject = data;
                                flag = true;
                                //$(".select2").select2();
                                $(".form_add_entry").show();
                                $(".overlay").hide();
                            });
                        });
                        // alert( "Handler for .click() called." );
                    });
                    $("#erp_form").validate({
                        rules: {
                            app_name: {
                                required: true
                            },
                            module_name: {
                                required: true
                            },
                            //  tour_name :{ required: true}
                        },
                        errorPlacement: function (error, element) {
                            if (element.attr("name") == "country" || element.attr("name") == "city") {
                                error.appendTo(element.parent());
                                element.parent().children(".select2-container").css('border', '1px solid red');
                            } else {
                                error.insertAfter(element);
                            }
                        },
                        submitHandler: function (form) {
                            /* get the elements required for the post method*/
                            $(".overlay").show();
                            var $form = $(form);
                            var url = $form.attr('action');
                            //alert(url)
                            if (action_type == "PUT") {
                                url += SubmitUrlId;
                            }
                            var formData = $form.serializeObject();
                            if (NewObject) {
                                formData.__v = NewObject.__v;
                                //formData.isActive=NewObject.isActive;
                                // NewObject.AccessToken=formData.AccessToken;
                            } /* post method */
                            // console.log((formData));
                            formData.files = $("#files").tagsinput('items');
                            formData.urls = $("#urls").tagsinput('items');
                            formData.functions = $("#functions").tagsinput('items');


                            $.ajax({
                                url: url,
                                type: action_type || "POST",
                                data: JSON.stringify(formData),
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (result) {
                                    document.getElementById("erp_form").reset();
                                    $("#files").tagsinput('removeAll');
                                    $("#urls").tagsinput('removeAll');
                                    $("#functions").tagsinput('removeAll');
                                    $(".select2").select2();
                                    if (result.message) {
                                        $(".select2").select2();
                                        if (action_type == "PUT") {
                                            $("#custom_Successt").alert();
                                            $("#custom_Success").fadeTo(2000, 500).slideUp(500, function () { });
                                            $(".form_add_entry").trigger("click");
                                        } else {
                                            $("#success-alert").alert();
                                            $("#success-alert").fadeTo(2000, 500).slideUp(500, function () { });
                                            document.getElementById("erp_form").reset();
                                            //  document.getElementById("").value= "";
                                        }
                                        if (action_type == "POST") {
                                            document.getElementById("erp_form").reset();
                                        } else {
                                            $('.btn-submit').attr('disabled', 'disabled');
                                        }
                                        window.sort_by = "_id";
                                        window.page = 0;
                                        $('.view-days').html("");
                                        $(".overlay").hide();
                                        call_grid(window.module_name, window.columns, window.page, "", "html", window.sort_by, window.sort_order);
                                        $("#grid_search_by").val("");
                                    }
                                },
                                error: function (jqXHR, textStatus, errorThrown) {
                                    $(".overlay").hide();
                                    if (jqXHR.status == 200 || jqXHR.status == 302) {
                                        window.location.href = '/login';
                                    }
                                    var result = jQuery.parseJSON(jqXHR.responseText);
                                    if (jqXHR.status == 500) {
                                        $(".custom_error").html(result.message);
                                        $("#danger-alert").alert();
                                        $("#danger-alert").fadeTo(2000, 500).slideUp(500, function () { });
                                        // alert('Internal error: ' + jqXHR.responseText);
                                    } else {
                                        $(".custom_error").html(errorThrown);
                                        $("#danger-alert").alert();
                                        $("#danger-alert").fadeTo(2000, 500).slideUp(500, function () { });
                                    }
                                }
                            });
                        }
                    });
                    $(document).on("click", ".remove_image", function () {
                        $(this).parent().remove();
                    });
                    $(document).on("change", ".cruise_region_img", function () {
                        //alert("hi");
                        var $this = $(this);
                        var file_data = $(this).prop("files")[0]; // Getting the properties of file from file field
                        console.log(file_data);
                        var ext = $this.val().split('.').pop().toLowerCase();
                        if ($.inArray(ext, ['jpg', 'jpeg']) == -1) {
                            alert('invalid extension!');
                            return false;
                        }
                        var form_data = new FormData(); // Creating object of FormData class
                        form_data.append("path", 'cruise/region'); // Adding extra parameters to form_data
                        form_data.append("file[]", file_data); // Appending parameter named file with properties of file_field to form_data
                        //$("#day_img_loader_"+counter).html("<b>Loading...</b>");
                        $.ajax({
                            url: "/route/upload/aws",
                            type: 'post',
                            // dataType: 'json',
                            data: form_data,
                            cache: false,
                            enctype: 'multipart/form-data',
                            processData: false, // tell jQuery not to process the data
                            contentType: false, // tell jQuery not to set contentType
                            success: function (result) {
                                console.log(result);
                                var data = JSON.stringify(result);
                                data = JSON.parse(data);
                                if (data.url) {
                                    // alert("success");
                                    var counter = $(".cruise_region_img").attr("data-counter");
                                    var selector = parseInt(counter) + 1;
                                    $(".cruise_region_img").attr("data-counter", selector);
                                    var textbox = '<div class="img_day_wise"><input type="hidden" name="images" id="fitimages_' + counter + '" class="form-control" value="' + data.url + '"><a href="' + data.url + '"  target="_new"><img src="' + data.url + '" width="50" height="50"></a><div>';
                                    //alert(textbox);
                                    $("#line_file").html(textbox);
                                }
                                //$("#day_img_loader_"+counter).html("");
                            },
                            error: function (jqXHR, textStatus, errorThrown) {
                                // $(".overlay").hide();
                                alert("Error in uploading image");
                                $("#day_img_loader_" + counter).html("");
                                var result = jQuery.parseJSON(jqXHR.responseText);
                                $("#day_img_loader_" + counter).html(result.message);
                            }
                        });
                    });
                    /*  end new  */
                });

                DrawTableInquiry = DrawCustomDataTable("uspList", 350,
                    "/route/manPowerRequest/grid-Data", dataColumns, [
                    [0, "asc"]
                ], "frm_grid_search", null, true, true);


                function openCity(evt, cityName) {
                    var i, tabcontent, tablinks;
                    tabcontent = document.getElementsByClassName("tabcontent");
                    for (i = 0; i < tabcontent.length; i++) {
                        tabcontent[i].style.display = "none";
                    }
                    tablinks = document.getElementsByClassName("tablinks");
                    for (i = 0; i < tablinks.length; i++) {
                        tablinks[i].className = tablinks[i].className.replace("active", "");
                    }
                    document.getElementById(cityName).style.display = "block";
                    evt.currentTarget.className += " active";
                }

                // for print Checklist
                function printGroupingDetails() {
                    var divToPrint1 = document.getElementById("Requirement");
                    var divToPrint2 = document.getElementById("Position Profile");
                    var divToPrint3 = document.getElementById("Other");
                    var divToPrint4 = document.getElementById("Recruitment");
                    divToPrint1.style.border = "1px";
                    divToPrint2.style.border = "1px";
                    divToPrint3.style.border = "1px";
                    divToPrint4.style.border = "1px";
                    newWin = window.open("");
                    newWin.document.write(divToPrint1.outerHTML, divToPrint2.outerHTML, divToPrint3.outerHTML, divToPrint4.outerHTML);
                    newWin.print();
                    newWin.close();
                };

                function printHrForm() {
                    var divToPrint = document.getElementById("erp_form");
                    console.log("divToPrint", divToPrint)
                    divToPrint.style.border = "1px";
                    newWin = window.open("");
                    newWin.document.write(divToPrint.outerHTML);
                    newWin.print();
                    newWin.close();
                };

                //get Data

                function getHrRecruitmentFormPrint(e) {
                    $('.divLoader').show();
                    var id = e.getAttribute('data-id');

                    $.ajax({
                        url: '/route/manPowerRequest/printHrForm/',
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        data: JSON.stringify({ id: id }),
                        dataType: "json",

                        success: function (result) {
                            console.log(result);
                            //bind the html in respective tag and show modal.
                            $('#printBody').html(result.html);
                            $('#printModal').modal('show');
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            var result = jQuery.parseJSON(jqXHR.responseText);
                        }
                    });
                }




            </script>
            <% include ../partials/footer %>